{"componentChunkName":"component---src-components-post-template-tsx","path":"/posts/2019/09/gatsby-getting-started/","webpackCompilationHash":"61206e7f69254dac973d","result":{"data":{"markdownRemark":{"html":"<p>습득한 지식을 글로 남겨야겠다는 생각을 계속해왔지만 실행에 옮기지 못했다. 예전부터 한 번쯤은 해보고 싶었던 정적 사이트 생성기로 웹사이트를 만든 기록을 시작으로 글을 조금씩 써보려 한다.</p>\n<h2>Gatsby를 선택한 이유</h2>\n<p>2015년 도메인을 처음 샀을 때만 해도 Ruby나 Python 생태계를 좀 더 이해하고자 <a href=\"https://jekyllrb.com\">Jekyll</a>이나, <a href=\"https://www.getlektor.com\">Lektor</a>로 개인 웹사이트를 만들 생각이었다. 하지만 어느덧 2019년이 됐고 요즘 트렌드는 <a href=\"https://www.gatsbyjs.org\">Gatsby</a>가 대세로 보인다. 대세에 합류하면서 다음과 같은 목적을 이루기 위해 Gatsby를 선택했다.</p>\n<ul>\n<li>기존에 생성해둔 HTML 페이지를 그대로 운영해야 한다.</li>\n<li>\n<p>모어던 JavaScript 생태계를 경험해보자.</p>\n<ul>\n<li><a href=\"https://www.typescriptlang.org\">TypeScript</a> 쓸만한가?</li>\n<li><a href=\"http://michelebertoli.github.io/css-in-js/\">CSS in JS</a> 써도 괜찮을까?</li>\n<li><a href=\"https://graphql.org\">GraphQL</a> 어떻게 쓰는 걸까?</li>\n</ul>\n</li>\n</ul>\n<h2>프로젝트 생성</h2>\n<p>Gatsby의 구성 요소를 조금 더 이해하기 위해 최소한의 설정으로 시작해보았다. gatsby-cli를 사용해서 프로젝트를 생성할 경우 <a href=\"https://github.com/gatsbyjs/gatsby-starter-hello-world\">gatsby-starter-hello-world</a>를 쓰면 된다. 이 글에서는 스타터 프로젝트를 사용하지 않고 npm을 사용해 프로젝트를 구성한다.</p>\n<p>먼저 기존에 갖고 있던 정적 HTML 파일은 <a href=\"https://www.gatsbyjs.org/docs/static-folder/\"><code class=\"language-text\">static</code> 디렉토리</a> 하위로 옮기자. Gatsby는 빌드 시 <code class=\"language-text\">static</code> 디렉토리 아래의 파일들을 자동으로 루트 에셋으로 포함시킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> static <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">mv</span> * static/*</code></pre></div>\n<p>npm으로 Node.js 프로젝트를 생성하고, 최소한의 의존관계를 추가한다. 이 사이트는 <a href=\"https://pages.github.com\">GitHub Pages</a>를 사용해서 운영해왔기 때문에 배포 툴로 <code class=\"language-text\">gh-pages</code>를 사용했다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init -y\n<span class=\"token function\">npm</span> i -E gatsby react react-dom\n<span class=\"token function\">npm</span> i -E -D gh-pages</code></pre></div>\n<p><code class=\"language-text\">package.json</code> 파일의 script 설정에 개발과 배포를 위한 스크립트를 등록한다.</p>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token operator\">...</span>\n  <span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"develop\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby develop\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"npm run develop\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"deploy\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span></code></pre></div>\n<p>빈 <a href=\"https://www.gatsbyjs.org/docs/gatsby-config/\">Gatsby 설정 파일</a>을 추가한다. 해당 파일은 빌드 시 Gatsby가 자동으로 인식하는 파일이며, 사이트의 메타 데이터나 플러그인을 설정한다.</p>\n<div class=\"gatsby-code-title\">gatsby-config.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gatsby는 <code class=\"language-text\">src/pages</code> 디펙토리 하위의 React 컴포넌트들을 자동으로 페이지로 등록한다. 시작 페이지를 만들어보자.</p>\n<div class=\"gatsby-code-title\">src/pages/index.js</div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Hello Gatsby!\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이제 개발 준비가 완료됐다. <code class=\"language-text\">npm start</code> 명령어로 개발 서버를 시작시키고 <a href=\"http://localhost:8000\">http://localhost:8000</a> 주소로 접속해보자. src/pages/index.js 파일을 편집하면 실시간으로 변경사항을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3358b5a43f4fdf2ee68f556d41888b8d/6acbb/01-hello-gatsby.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.979338842975206%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPElEQVQI12MoKCj4n5+f/7+uvv7/rt17/u/as/f/wUOH/x8/cZIszPD+/fv/b9++/f/nz5//1AAM/6kMAPTD3nH+vM1aAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01 hello gatsby\"\n        title=\"01 hello gatsby\"\n        src=\"/static/3358b5a43f4fdf2ee68f556d41888b8d/8ff1e/01-hello-gatsby.png\"\n        srcset=\"/static/3358b5a43f4fdf2ee68f556d41888b8d/9ec3c/01-hello-gatsby.png 200w,\n/static/3358b5a43f4fdf2ee68f556d41888b8d/c7805/01-hello-gatsby.png 400w,\n/static/3358b5a43f4fdf2ee68f556d41888b8d/8ff1e/01-hello-gatsby.png 800w,\n/static/3358b5a43f4fdf2ee68f556d41888b8d/6ff5e/01-hello-gatsby.png 1200w,\n/static/3358b5a43f4fdf2ee68f556d41888b8d/2f950/01-hello-gatsby.png 1600w,\n/static/3358b5a43f4fdf2ee68f556d41888b8d/6acbb/01-hello-gatsby.png 1936w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>기초적인 설정이 완료된 후 생성된 파일들은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">├─ src               <span class=\"token comment\"># 앞으로 모든 코드는 src 하위에 생성됨</span>\n│  └─ pages          <span class=\"token comment\"># 해당 디렉토리 아래 생성되는 컴포넌트는 페이지로 자동 등록</span>\n│     └─ index.js    <span class=\"token comment\"># 첫 페이지</span>\n├─ static            <span class=\"token comment\"># 기존에 갖고 있던 HTML 파일, 이미지, favicon, CNAME 설정 등</span>\n├─ gatsby-config.js  <span class=\"token comment\"># Gatsby 설정 파일</span>\n└─ package.json      <span class=\"token comment\"># Node.js 프로젝트 메타데이터, 의존관계 등 기술</span></code></pre></div>\n<p><a href=\"/posts/2019/09/gatsby-layout\">다음 글</a>에서는 웹페이지의 Layout 컴포넌트를 만들어 보겠다.</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/tutorial/part-zero/\">Gatsby Tutorial - Set Up Your Development Environment</a></li>\n<li><a href=\"https://www.gatsbyjs.org/tutorial/part-one/\">Gatsby Tutorial - Get to know Gatsby building blocks</a></li>\n<li><a href=\"https://www.gatsbyjs.org/docs/static-folder/\">Gatsby Docs - Using the Static folder</a></li>\n</ul>","frontmatter":{"title":"Gatsby로 개인 웹사이트 만들기 - 셋업","description":"Gatsby 개발환경을 구성한다","date":"September 19, 2019","tags":["gatsby","react"]},"fields":{"slug":"/posts/2019/09/gatsby-getting-started/"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/2019/09/gatsby-getting-started/"}}}